<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SentinelMine ‚Äî AI Disaster Risk Prediction</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body { background:#f8f9fa; }
    .navbar { background:#2c3e50; }
    .navbar-brand { color:#fff !important; font-weight:600; }
    .feature-card { padding:15px; margin:10px; border-radius:12px; background:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.08); }
    .result-box { padding:20px; border-radius:12px; color:#fff; text-align:center; margin-top:20px; }
    .green { background:#27ae60; }
    .yellow { background:#f1c40f; color:#000; }
    .red { background:#e74c3c; }
    .led { display:inline-block; width:18px; height:18px; border-radius:50%; margin-right:8px; vertical-align:middle; }
    #history { margin-top:30px; }
    .small-muted { font-size:0.85rem; color:#6c757d; }
    .mine-caption { font-size:0.9rem; color:#555; margin-top:8px; }

    .mine-svg { width:100%; max-width:720px; height:auto; display:block; margin-top:12px; }
    .zone { fill: rgba(255,255,255,0.03); stroke: rgba(0,0,0,0.08); stroke-width:1; transition: fill 300ms ease, filter 300ms ease, transform 300ms ease; }
    .zone-label { font-size:12px; fill:#222; pointer-events:none; }

    .zone.highlight-yellow { fill: rgba(241,196,15,0.55); filter: drop-shadow(0 6px 14px rgba(241,196,15,0.18)); transform: scale(1.03); }
    .zone.highlight-red { fill: rgba(231,76,60,0.65); filter: drop-shadow(0 8px 18px rgba(231,76,60,0.22)); transform: scale(1.06); }

    @keyframes pulse-strong {
      0% { r: 0; opacity: 0.9; }
      70% { r: 70; opacity: 0; }
      100% { r: 0; opacity: 0; }
    }
    .pulse-circle { fill: rgba(231,76,60,0.25); animation: pulse-strong 2s infinite; }

    .all-clear-badge { display:inline-block; padding:6px 10px; border-radius:8px; background:rgba(39,174,96,0.12); color:#27ae60; font-weight:600; margin-top:6px; }
    .minimap-wrap { margin-top:12px; }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand">‚õèÔ∏è SentinelMine Risk Monitor</a>
    </div>
  </nav>

  <div class="container mt-4">
    <div class="row">
      <!-- Input (left) -->
      <div class="col-md-6">
        <h4 class="mb-3">‚öôÔ∏è Sensor Controls</h4>
        <div class="row" id="form"></div>
      </div>

      <!-- Output (right) -->
      <div class="col-md-6">
        <h4 class="mb-3">üìä Prediction Result</h4>
        <div id="output" style="display:none;">
          <div id="alertBox" class="result-box">
            <div><span id="led" class="led"></span><span id="alertText"></span></div>
            <h5 id="messageText" class="mt-2"></h5>
            <canvas id="gaugeChart" width="250" height="250"></canvas>
            <p class="mt-2">Risk Probability: <span id="probVal"></span></p>
          </div>
        </div>

        <div id="history" class="mt-4">
          <h5>üìú Recent Predictions</h5>
          <ul class="list-group" id="historyList"></ul>
          <div class="d-flex justify-content-between align-items-center mt-2">
            <small class="small-muted">Showing latest 5</small>
            <button type="button" id="viewFullBtn" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#fullHistoryModal">
              View full history
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Mine (SVG top-view) -->
    <div class="mt-5">
      <h4>‚õèÔ∏è Mine Risk Map (top view)</h4>
      <div class="minimap-wrap">
        <svg id="mineSvg" class="mine-svg" viewBox="0 0 720 380" xmlns="http://www.w3.org/2000/svg">
          <!-- Cone-shaped terraces (outer to inner) -->
          <ellipse cx="360" cy="210" rx="250" ry="66" fill="none" stroke="#dfe6e9" stroke-width="18"/>
          <ellipse cx="360" cy="210" rx="190" ry="50" fill="none" stroke="#e9ecef" stroke-width="14"/>
          <ellipse cx="360" cy="210" rx="140" ry="36" fill="none" stroke="#d6d6d6" stroke-width="12"/>
          <ellipse cx="360" cy="210" rx="100" ry="28" fill="none" stroke="#cfcfcf" stroke-width="12"/>
          <ellipse cx="360" cy="210" rx="70" ry="20" fill="#9ea7aa"/>

          <!-- Zones -->
          <g id="zonesGroup">
            <ellipse id="Z1" class="zone" cx="250" cy="210" rx="60" ry="20"/>
            <text x="250" y="210" class="zone-label" text-anchor="middle" dy="4">Z1</text>

            <ellipse id="Z2" class="zone" cx="360" cy="170" rx="70" ry="22"/>
            <text x="360" y="170" class="zone-label" text-anchor="middle" dy="4">Z2</text>

            <ellipse id="Z3" class="zone" cx="480" cy="200" rx="60" ry="18"/>
            <text x="480" y="200" class="zone-label" text-anchor="middle" dy="4">Z3</text>

            <ellipse id="Z4" class="zone" cx="300" cy="260" rx="90" ry="26"/>
            <text x="300" y="260" class="zone-label" text-anchor="middle" dy="4">Z4</text>

            <ellipse id="Z5" class="zone" cx="420" cy="250" rx="80" ry="24"/>
            <text x="420" y="250" class="zone-label" text-anchor="middle" dy="4">Z5</text>

            <ellipse id="Z6" class="zone" cx="360" cy="120" rx="50" ry="16"/>
            <text x="360" y="120" class="zone-label" text-anchor="middle" dy="4">Z6</text>
          </g>
        </svg>
      </div>
      <p class="mine-caption">Top view schematic: inner pit is narrow, outer terraces are broad. Highlighted zones indicate likely landslide/rockfall.</p>
    </div>
  </div>

  <!-- Full history modal -->
  <div class="modal fade" id="fullHistoryModal" tabindex="-1" aria-labelledby="fullHistoryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="fullHistoryModalLabel">Full Prediction History</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <ul class="list-group" id="fullHistoryList"></ul>
        </div>
        <div class="modal-footer">
          <button type="button" id="clearHistoryBtn" class="btn btn-danger btn-sm">Clear History</button>
          <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  /* JS is same as before (prediction, history, gauge, mine highlight) */
  </script>
</body>
</html>
